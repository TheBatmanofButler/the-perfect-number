var drop=function(a,b,c){for(var d=0;d<b.length-a;++d)b[d]=b[d+a];b.length-=a,c.apply(this,b)};d3.transition.prototype.end=function(a,b){var c=a,d=b,e=this;return 0===e.size()&&a(),drop(2,arguments,function(){var a=arguments;if(!e.size()&&(d||0===d))d3.timer(function(){return c.apply(e,a),!0},"number"==typeof d?d:0);else{var b=0;e.each(function(){++b}).on("end",function(){--b||c.apply(e,a)})}}),e},d3.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})};